<head>
    <title>HTF</title>
    <!--
    <script src="https://cdn.firebase.com/v0/firebase.js"></script>-->
     <script src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
    
</head>

<body>
    {{> nav}}
    {{> content}}
</body>

<template name="nav">
    <nav>
        <span class="login">
            {{loginButtons align="right"}}
       </span>
       {{#if currentUser}}
            {{>loggedInMenu}}
        {{else}}
         <h4>Please log in to register new points</h4>
       {{/if}}

       
    </nav>
</template>

<template name="content">
    <div id="container">
       {{> map}}
    </div>
</template>

<template name="loggedInMenu">
    <div id="main_menu">
        <a href="#" class="agencyAdd" type="button">Create An Agency</a>
        {{>newAgency}}
        <a href="#" class="settingsShow" type="button">Settings</a>
        {{> settings}}
        <a href="#" class="markerAddShow" type="button">Add Point</a>
        {{> add_marker}}
        <a href="#" class="showMarkers" type="button">Points</a>
        
        <div id="the_markers">
           {{#each marker_index}}
            {{>markers}}
           {{/each}}
        </div>
        
        <small>Double click to add a marker</small>

    </div>

</template>

<template name="map">
  <div id="map_canvas"></div>
</template>

<template name="settings">
<div id="user_settings">
  <div id="phone_number">
     <fieldset><input type="text"   placeholder="Phone Number" class="phone_number" {{#if hasPhone}} value="{{phone_number}}"{{/if}}>
     <input type="button" class="update_phone" value="Update"></fieldset>
  </div>
  <div id="email">
     <input type="text"   placeholder="email" class="email">
     <input type="button" class="update_email" value="Update">
  </div>
  <div id="agency">
    
    <input type="text" placeholder="Agency Code" class="agency_code" {{#if hasAgency}} value="{{agency_code}}"{{/if}}>
    <input type="button" class="update_agency" value="Update">
  </div>
</div>

</template>

<template name="newAgency">
    <div id="agency_new">
        <input type="text" placeholder="Name of Agency" class="agency" />
        <select class="type">
            <option>Hospital</option>
            <option>Clinic</option>
            <option>Gov. Related</option>
            <option>Other</option>
        </select>
        <input type="administrators" placeholder="List of administrator email addresses comma seperated" size="400" />
    </div>
</template>

<template name="add_marker">
    <div id="marker_add" >
        <select class="marker_type">
            <option>Hospital</option>
            <option>Care Provider</option>
            <option>Shelter</option>
            <option>Other</option>
        </select>
        <input type="text"   placeholder="marker Name" class="marker_name">
        <input type="text"   placeholder="Street Address" class="marker_address">
        
        <select class="marker_visiblity">
            <option>Private</option>
            <option>Everywhere Permitted</option>
        </select>
        
        <input type="button" class="add_marker" value="enter">
    </div>
</template>

<template name="edit_marker">
    <div id ="marker_edit">
        <input type="text"   placeholder="marker Name" class="marker_name" value="{{marker_name}}">
        <input type="text"   placeholder="Street Address" class="marker_address" value="{{marker_address}}">
        <input type="text"   placeholder="X" class="marker_x" value="{{loc.[0]}}">
        <input type="text"   placeholder="Y" class="marker_y" value="{{loc.[1]}}">
        <input type="button" class="edit_marker" value="Update">
    </div>
</template>

<template name="markers">
<!-- clinic name to support legacy --><span class="marker"><a href="#" class="edit_marker">
<input type="button" class="del_marker" value="x"> {{name}}</a></span>
</template>